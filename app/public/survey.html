<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Tables Page</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<body>

  <div class="container">

    <div class="jumbotron">
      <h1 class="text-center">Fill Out Our Quiz!</h1>
      <hr>
      <h2 class="text-center">Please Fill out your preferences from 1 (least) to 5 (most)</h2>
      
      <br>
      <div class="text-center">
            <a href="*"><button class="btn btn-lg btn-primary">Go Home</button></a>
            
          </div>
    </div>



    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-header">
                    <h4>Enter your Name!</h4>
                </div>
                        <div class="card-body">
                                <div class="form-group">
                                        <label for = "name">Name</label>
                                        <input class = "form-control" id = "name">
                                </div>  
                        </div>
            </div>

            <div class="card">
                <div class = "card-header">
                    <h4>Upload a link to your profile pic!</h4>
                </div>
                <div class = "card-body">
                    <div class = "form-group">
                        <label for = "picture">Profile Pic</label>
                        <input class = "form-control" id = "picture" placeholder="paste link here">
                    </div>
                </div>
            </div>
        

            <div class="card">
                <div class="card-header">
                    <h4>QUESTION 1:</h4>
                    <h5>How much do you like Dogs?</h5>
                </div>
                <div class="card-body">
                        <div class="form-group">
                                <label for="q1">Answer</label>
                                <select class="form-control" id="q1">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                </select>
                        </div>  
                </div>
            </div>

            <div class="card">
                    <div class="card-header">
                    <h4>QUESTION 2:</h4>
                    <h5>How much do you like Cats?</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                                <label for="q2">Answer</label>
                                <select class="form-control" id="q2">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                        </div>  
                    </div>
            </div>
            
            <div class="card">
                    <div class="card-header">
                    <h4>QUESTION 3:</h4>
                    <h5>How much do you like Cheeseburgers?</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                                <label for="q3">Answer</label>
                                <select class="form-control" id="q3">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                        </div>  
                    </div>
            </div>

            <div class="card">
                    <div class="card-header">
                    <h4>QUESTION 4:</h4>
                    <h5>How much do you like Pizza?</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                                <label for="exampleFormControlSelect1">Answer</label>
                                <select class="form-control" id="q4">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                        </div>  
                    </div>
            </div>

            <div class="card">
                    <div class="card-header">
                    <h4>QUESTION 5:</h4>
                    <h5>How much do you like Jazz?</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                                <label for="exampleFormControlSelect1">Example select</label>
                                <select class="form-control" id="q5">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                        </div>  
                    </div>
            </div>

            <div class="card">
                    <div class="card-header">
                    <h4>QUESTION 6:</h4>
                    <h5>How much do you like Hip-Hop?</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                                <label for="exampleFormControlSelect1">Example select</label>
                                <select class="form-control" id="q6">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                        </div>  
                    </div>
            </div>

            <div class="card">
                    <div class="card-header">
                    <h4>QUESTION 7:</h4>
                    <h5>How much do you like Country?</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                                <label for="exampleFormControlSelect1">Example select</label>
                                <select class="form-control" id="q7">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                        </div>  
                    </div>
            </div>

            <div class="card">
                    <div class="card-header">
                    <h4>QUESTION 8:</h4>
                    <h5>How much do you like Rock?</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                                <label for="exampleFormControlSelect1">Example select</label>
                                <select class="form-control" id="q8">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                        </div>  
                    </div>
            </div>

            <div class="card">
                    <div class="card-header">
                    <h4>QUESTION 9:</h4>
                    <h5>How much do you like Web Development?</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                                <label for="exampleFormControlSelect1">Example select</label>
                                <select class="form-control" id="q9">
                                    <option>1 (least)</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5 (most)</option>
                                </select>
                        </div>  
                    </div>
            </div>

            <div class="card">
                    <div class="card-header">
                    <h4>QUESTION 10:</h4>
                    <h5>How much do you like Die Hard?</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                                <label for="exampleFormControlSelect1">Example select</label>
                                <select class="form-control" id="q10">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>
                        </div>  
                    </div>
            </div>
      
        </div>
    </div>

    <button type = "button" class = "btn btn-primary" id = "submit">Submit Survey!</button>

    <div class = "modal-fade" id = "resultModal" aria-hidden="true" tabindex="-1">
        <div class = "modal-dialog" role = "document">
            <div class = "modal-content">
                <div class = "modal header">
                    <h5>Your Best Match!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div>
                    <div class = "modal-body">
                        <h6 id = "resultName"></h6>
                        <img id = profilePic/>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer mt-4">
      <div class="container">
        <p>Control Panel</p>
        <p><a href="#" id="clear">Clear Table</a> | <a href="/api/tables">API Table Link</a> | <a href="/api/waitlist">API
            Wait List</a>
      </div>
    </footer>
  </div>
</body>

<style>
    .card{
        margin: 20px 0px 20px 0px;
    }
</style>

<!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS LOADED FROM OUR SERVER -->
<script type="text/javascript">
    let friendsArray = require(friends.js);

    $("#submit").on("click", (event) =>{
        event.preventDefault();

        let newFriend = {
            name = $("#name").val().trim(),
            photo = $("picture").val().trim(),
            scores = [$("#q1").val(),
            $("#q2").val(),
            $("#q3").val(),
            $("#q4").val(),
            $("#q5").val(),
            $("#q6").val(),
            $("#q7").val(),
            $("#q8").val(),
            $("#q9").val(),
            $("q10").val()
            ]
        };

        //compare newFriends score to scores in friends.js
        let bestFriend = findBestFriend(newFriend, friendsArray);

        

        

        $.post("/api/friends", newFriend, (data) => {
            

        });

        

        
    });
    
    function findBestFriend(newFriend, friendsArray){
        let bestFriend = [friendsArray[0]];
        
        for (let friend in friendArray){
            if (findDifference(newFriend, friend) < findDifference(newFriend,bestFriend[0])){
                let bestFriend = [friend];
            }
            else if (findDifference(newFriend, friend) = findDifference(newFriend,bestFriend[0])){
                bestFriend.push(friend);
            }  
        }
        return bestFriend;
    }

    function findDifference(friend1, friend2){
        let difference = 0;
        for(let i = 0; i<10; i++){
                difference += Math.abs(friend1.score[i]-friend2.score[i]);
            }
        return difference;
    }
    

</script>

</html>
